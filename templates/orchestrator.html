<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Orchestrator - Smart Multi-Specialist AI Coordination Platform">
    <meta name="keywords" content="AI Orchestrator, Multi-Specialist, AI Coordination, Smart Assistant">
    <meta name="theme-color" content="#ffffff">
    
    <title>ðŸ§  AI Orchestrator - Smart Specialist Coordination</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/static/css/design-system.css" as="style">
    <link rel="preload" href="/static/js/theme-manager.js" as="script">
    <link rel="preload" href="/static/js/animation-utils.js" as="script">
    
    <!-- External CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Our Design System -->
    <link rel="stylesheet" href="/static/css/design-system.css">
    
    <style>
        /* Orchestrator-specific enhancements */
        .orchestrator-layout {
            background: var(--bg-secondary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .orchestrator-navbar {
            background: var(--bg-surface) !important;
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-primary);
            box-shadow: var(--shadow-lg);
            padding: var(--space-4) 0;
        }

        .orchestrator-navbar .navbar-brand {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary) !important;
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .orchestrator-navbar .navbar-brand i {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .main-orchestrator {
            flex: 1;
            display: flex;
            padding: var(--space-6);
            gap: var(--space-6);
        }

        /* Enhanced Sidebar */
        .orchestrator-sidebar {
            width: 320px;
            background: var(--bg-surface);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: var(--space-6);
            height: fit-content;
            position: sticky;
            top: var(--space-6);
        }

        .sidebar-section {
            margin-bottom: var(--space-8);
        }

        .sidebar-section:last-child {
            margin-bottom: 0;
        }

        .sidebar-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .sidebar-title i {
            color: var(--primary-500);
        }

        /* Enhanced Chat Area */
        .orchestrator-chat {
            flex: 1;
            background: var(--bg-surface);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--border-primary);
            background: var(--bg-tertiary);
        }

        .chat-header h4 {
            margin: 0;
            color: var(--text-primary);
            font-weight: var(--font-weight-semibold);
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .chat-messages {
            flex: 1;
            padding: var(--space-6);
            overflow-y: auto;
            background: var(--bg-secondary);
            max-height: calc(100vh - 320px);
        }

        .welcome-state {
            text-align: center;
            padding: var(--space-16) var(--space-6);
            color: var(--text-muted);
        }

        .welcome-state i {
            font-size: 4rem;
            opacity: 0.3;
            margin-bottom: var(--space-4);
            display: block;
        }

        .welcome-state h4 {
            color: var(--text-secondary);
            margin-bottom: var(--space-3);
        }

        .welcome-state p {
            margin-bottom: var(--space-2);
            line-height: var(--line-height-relaxed);
        }

        /* Enhanced Messages */
        .orchestrator-message {
            margin-bottom: var(--space-5);
            animation: messageSlideIn 0.4s var(--transition-bounce);
        }

        .message-content {
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            position: relative;
            word-wrap: break-word;
            line-height: var(--line-height-relaxed);
        }

        .user-message .message-content {
            background: var(--gradient-primary);
            color: var(--text-inverse);
            margin-left: 15%;
            border-bottom-right-radius: var(--radius-sm);
        }

        .assistant-message .message-content {
            background: var(--bg-surface);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
            margin-right: 15%;
            border-bottom-left-radius: var(--radius-sm);
        }

        .message-header {
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-2);
            font-size: var(--font-size-sm);
        }

        /* Specialist Badges */
        .specialist-badges {
            margin-top: var(--space-4);
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .specialist-badge {
            background: var(--gradient-success);
            color: var(--text-inverse);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
        }

        .specialist-responses {
            margin-top: var(--space-4);
        }

        .specialist-response {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-left: 4px solid var(--primary-500);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
        }

        .specialist-response:last-child {
            margin-bottom: 0;
        }

        /* Enhanced Input Section */
        .chat-input-section {
            padding: var(--space-6);
            border-top: 1px solid var(--border-primary);
            background: var(--bg-surface);
        }

        .input-with-tips {
            margin-top: var(--space-3);
            font-size: var(--font-size-sm);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        /* Active Specialists */
        .specialists-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .specialist-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            transition: all var(--transition-base);
        }

        .specialist-item:hover {
            background: var(--bg-surface);
            transform: translateX(4px);
        }

        .specialist-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-sm);
            flex-shrink: 0;
        }

        .specialist-icon.pm { background: var(--gradient-pm); }
        .specialist-icon.dev { background: var(--gradient-dev); }
        .specialist-icon.analyst { background: var(--gradient-analyst); }
        .specialist-icon.designer { background: var(--gradient-designer); }
        .specialist-icon.marketing { background: var(--gradient-marketing); }
        .specialist-icon.qa { background: var(--gradient-qa); }
        .specialist-icon.devops { background: var(--gradient-devops); }

        .specialist-info {
            flex: 1;
        }

        .specialist-name {
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-sm);
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .specialist-role {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
        }

        /* Suggested Actions */
        .actions-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .action-button {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            color: var(--text-secondary);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            text-align: left;
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .action-button:hover {
            background: var(--primary-50);
            border-color: var(--primary-200);
            color: var(--primary-700);
            transform: translateY(-1px);
        }

        /* System Status */
        .status-indicators {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .status-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: var(--font-size-sm);
        }

        .status-badge {
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
        }

        .status-badge.success {
            background: var(--success-100);
            color: var(--success-700);
        }

        .status-badge.warning {
            background: var(--warning-100);
            color: var(--warning-700);
        }

        .status-badge.danger {
            background: var(--danger-100);
            color: var(--danger-700);
        }

        /* Loading States */
        .thinking-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            color: var(--text-muted);
            font-style: italic;
            font-size: var(--font-size-sm);
        }

        .loading-dots {
            display: inline-flex;
            gap: var(--space-1);
        }

        .loading-dots span {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--primary-500);
            animation: loadingDots 1.4s infinite ease-in-out both;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-orchestrator {
                flex-direction: column;
            }

            .orchestrator-sidebar {
                width: 100%;
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .main-orchestrator {
                padding: var(--space-4);
                gap: var(--space-4);
            }

            .user-message .message-content {
                margin-left: 5%;
            }

            .assistant-message .message-content {
                margin-right: 5%;
            }

            .chat-messages {
                max-height: calc(100vh - 280px);
            }

            .specialist-badges {
                justify-content: center;
            }
        }

        /* Print Styles */
        @media print {
            .orchestrator-navbar,
            .orchestrator-sidebar,
            .chat-input-section {
                display: none !important;
            }

            .orchestrator-chat {
                border: none;
                box-shadow: none;
            }
        }
    </style>
</head>
<body class="orchestrator-layout">
    <!-- Enhanced Navbar -->
    <nav class="orchestrator-navbar">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center w-100">
                <div class="navbar-brand">
                    <i class="fas fa-brain"></i>
                    AI Orchestrator
                    <span class="badge bg-primary ms-2">v2.0</span>
                </div>
                
                <div class="d-flex gap-3">
                    <button class="btn-modern btn-secondary btn-sm" onclick="showSpecialistInfo()">
                        <i class="fas fa-users"></i>
                        <span class="d-none d-sm-inline">Uzmanlar</span>
                    </button>
                    <button class="btn-modern btn-primary btn-sm" onclick="showApiManagement()">
                        <i class="fas fa-key"></i>
                        <span class="d-none d-sm-inline">API YÃ¶netimi</span>
                    </button>
                    <!-- Theme toggle will be automatically added here -->
                </div>
            </div>
        </div>
    </nav>

    <div class="main-orchestrator">
        <!-- Enhanced Sidebar -->
        <aside class="orchestrator-sidebar" data-animate="fadeInLeft">
            <!-- Active Specialists Section -->
            <div class="sidebar-section">
                <h5 class="sidebar-title">
                    <i class="fas fa-users"></i>
                    Aktif Uzmanlar
                </h5>
                <div id="activeSpecialists" class="specialists-list">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-user-plus opacity-50"></i>
                        <p class="mb-0 mt-2 small">HenÃ¼z aktif uzman yok</p>
                    </div>
                </div>
            </div>

            <!-- Suggested Actions Section -->
            <div class="sidebar-section">
                <h5 class="sidebar-title">
                    <i class="fas fa-lightbulb"></i>
                    Ã–nerilen Aksiyonlar
                </h5>
                <div id="suggestedActions" class="actions-list">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-magic opacity-50"></i>
                        <p class="mb-0 mt-2 small">Åžu anda Ã¶neri yok</p>
                    </div>
                </div>
            </div>

            <!-- System Status Section -->
            <div class="sidebar-section">
                <h6 class="sidebar-title">
                    <i class="fas fa-server"></i>
                    Sistem Durumu
                </h6>
                <div id="systemStatus" class="status-indicators">
                    <div class="status-item">
                        <span>Durum</span>
                        <span class="status-badge success">YÃ¼kleniyor...</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Enhanced Chat Area -->
        <main class="orchestrator-chat" data-animate="fadeInRight" data-delay="200">
            <!-- Chat Header -->
            <div class="chat-header">
                <h4>
                    <i class="fas fa-comments"></i>
                    AI Orchestrator'a HoÅŸ Geldiniz!
                </h4>
                <p class="mb-0 text-secondary small">
                    MesajÄ±nÄ±zÄ± yazÄ±n, gerekli uzmanlar otomatik olarak devreye girecek.
                </p>
            </div>

            <!-- Chat Messages -->
            <div class="chat-messages" id="chatContainer">
                <div class="welcome-state">
                    <i class="fas fa-comments floating"></i>
                    <h4>Uzman Koordinasyonu BaÅŸlasÄ±n!</h4>
                    <p>MesajÄ±nÄ±zÄ± yazÄ±n, akÄ±llÄ± sistem hangi uzmanlarÄ±n gerekli olduÄŸunu belirleyecek.</p>
                    <p><strong>Ã–rnek:</strong> "SelamÃ¼naleykÃ¼m. Bu gÃ¼n bir mobil uygulamanÄ±n temellerini atmak istiyorum. Hadi kullanacaÄŸÄ±mÄ±z yapÄ±ya karar verelim."</p>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="thinking-indicator px-6 py-3" id="loading" style="display: none;">
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span>Uzmanlar koordine ediliyor...</span>
            </div>

            <!-- Enhanced Input Section -->
            <div class="chat-input-section">
                <div class="row g-3">
                    <div class="col-md-10">
                        <textarea class="form-control focus-ring" 
                                  id="messageInput" 
                                  rows="3" 
                                  placeholder="MesajÄ±nÄ±zÄ± yazÄ±n... (Ã–rn: Yeni bir proje baÅŸlatmak istiyorum)"
                                  onkeydown="handleKeyPress(event)"></textarea>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button class="btn-modern btn-primary w-100 h-100" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                            <span class="d-none d-sm-inline d-block mt-1">GÃ¶nder</span>
                        </button>
                    </div>
                </div>
                
                <div class="input-with-tips">
                    <i class="fas fa-info-circle"></i>
                    <span>Proje, teknik sorular, tasarÄ±m, pazarlama gibi konulardan bahsedin. Ä°lgili uzmanlar otomatik devreye girecek.</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced Specialist Info Modal -->
    <div class="modal fade" id="specialistModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-users"></i>
                        Uzman Ekibi
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="specialistInfo">
                    <div class="loading-pulse">Uzman bilgileri yÃ¼kleniyor...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced API Management Modal -->
    <div class="modal fade" id="apiModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-key"></i>
                        API YÃ¶netimi
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <strong>Bilgi:</strong> API anahtarlarÄ±nÄ±zÄ± gÃ¼venli bir ÅŸekilde yÃ¶netin. 
                        FarklÄ± uzmanlar iÃ§in farklÄ± API saÄŸlayÄ±cÄ±larÄ± kullanabilirsiniz.
                    </div>
                    <iframe src="/api-management" 
                            style="width: 100%; height: 500px; border: none; border-radius: var(--radius-md);"></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/theme-manager.js"></script>
    <script src="/static/js/animation-utils.js"></script>
    
    <script>
        let conversationHistory = [];

        // Enhanced initialization
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ§  AI Orchestrator v2.0 - Specialist Coordination Active');
            
            // Initialize components
            initializeOrchestrator();
            
            // Load system status
            updateSystemStatus();
            
            // Focus on message input
            document.getElementById('messageInput').focus();
        });

        function initializeOrchestrator() {
            // Add entrance animations to existing elements
            const sidebar = document.querySelector('.orchestrator-sidebar');
            const chat = document.querySelector('.orchestrator-chat');
            
            if (window.animationUtils) {
                // Stagger sidebar sections
                const sections = sidebar.querySelectorAll('.sidebar-section');
                window.animationUtils.staggerAnimation(sections, 'bounce-in', 200);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        async function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (!message) return;

            // Add user message to chat
            addMessage(message, 'user');
            messageInput.value = '';

            // Show loading
            showLoading(true);

            try {
                const response = await fetch('/orchestrate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        conversation_history: conversationHistory
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    // Add orchestrated response
                    addOrchestratedMessage(data.data);
                    
                    // Update sidebar
                    updateActiveSpecialists(data.data.active_specialists);
                    updateSuggestedActions(data.data.suggested_next_actions);
                    
                    // Update conversation history
                    conversationHistory.push({
                        user: message,
                        assistant: data.data.primary_response,
                        specialists: data.data.active_specialists
                    });
                } else {
                    addMessage('ÃœzgÃ¼nÃ¼m, bir hata oluÅŸtu: ' + data.error, 'assistant');
                }
            } catch (error) {
                console.error('Error:', error);
                addMessage('BaÄŸlantÄ± hatasÄ± oluÅŸtu. LÃ¼tfen tekrar deneyin.', 'assistant');
            } finally {
                showLoading(false);
            }
        }

        function addMessage(message, type) {
            const chatContainer = document.getElementById('chatContainer');
            
            // Clear welcome message on first real message
            if (chatContainer.querySelector('.welcome-state')) {
                chatContainer.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `orchestrator-message ${type}-message`;
            
            const content = `
                <div class="message-content">
                    <div class="message-header">${type === 'user' ? 'ðŸ‘¤ Siz' : 'ðŸ§  KoordinatÃ¶r'}</div>
                    <div>${message}</div>
                </div>
            `;
            
            messageDiv.innerHTML = content;
            chatContainer.appendChild(messageDiv);
            
            // Animate message
            if (window.animationUtils) {
                window.animationUtils.animateMessage(messageDiv, type);
            }
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function addOrchestratedMessage(data) {
            const chatContainer = document.getElementById('chatContainer');
            
            // Clear welcome message on first real message
            if (chatContainer.querySelector('.welcome-state')) {
                chatContainer.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'orchestrator-message assistant-message';
            
            let content = `
                <div class="message-content">
                    <div class="message-header">ðŸ§  KoordinatÃ¶r</div>
                    <div>${data.primary_response}</div>
            `;
            
            // Add specialist badges
            if (data.active_specialists && data.active_specialists.length > 0) {
                content += '<div class="specialist-badges">';
                data.active_specialists.forEach(specialist => {
                    const specialistInfo = getSpecialistDisplayInfo(specialist);
                    content += `<span class="specialist-badge">${specialistInfo.icon} ${specialistInfo.name}</span>`;
                });
                content += '</div>';
            }
            
            // Add specialist responses if available
            if (data.specialist_responses && Object.keys(data.specialist_responses).length > 0) {
                content += '<div class="specialist-responses"><strong>Uzman GÃ¶rÃ¼ÅŸleri:</strong>';
                for (const [specialist, response] of Object.entries(data.specialist_responses)) {
                    const specialistInfo = getSpecialistDisplayInfo(specialist);
                    content += `
                        <div class="specialist-response">
                            <strong>${specialistInfo.icon} ${specialistInfo.name}:</strong><br>
                            ${response}
                        </div>
                    `;
                }
                content += '</div>';
            }
            
            content += '</div></div>';
            messageDiv.innerHTML = content;
            
            chatContainer.appendChild(messageDiv);
            
            // Animate message
            if (window.animationUtils) {
                window.animationUtils.animateMessage(messageDiv, 'assistant');
            }
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function updateActiveSpecialists(specialists) {
            const container = document.getElementById('activeSpecialists');
            
            if (!specialists || specialists.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-user-plus opacity-50"></i>
                        <p class="mb-0 mt-2 small">HenÃ¼z aktif uzman yok</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            specialists.forEach((specialist, index) => {
                const info = getSpecialistDisplayInfo(specialist);
                html += `
                    <div class="specialist-item stagger-${index + 1}" data-animate="fadeInLeft" data-delay="${(index + 1) * 100}">
                        <div class="specialist-icon ${info.class}">
                            ${info.icon}
                        </div>
                        <div class="specialist-info">
                            <div class="specialist-name">${info.name}</div>
                            <div class="specialist-role">${info.role}</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Trigger animations
            if (window.animationUtils) {
                const items = container.querySelectorAll('.specialist-item');
                window.animationUtils.staggerAnimation(items, 'bounce-in', 100);
            }
        }

        function updateSuggestedActions(actions) {
            const container = document.getElementById('suggestedActions');
            
            if (!actions || actions.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-magic opacity-50"></i>
                        <p class="mb-0 mt-2 small">Åžu anda Ã¶neri yok</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            actions.forEach((action, index) => {
                html += `
                    <button class="action-button" 
                            onclick="sendSuggestedAction('${action.replace(/'/g, "\\'")}')"
                            data-animate="fadeInUp" 
                            data-delay="${(index + 1) * 50}">
                        ${action}
                    </button>
                `;
            });
            
            container.innerHTML = html;
            
            // Trigger animations
            if (window.animationUtils) {
                const buttons = container.querySelectorAll('.action-button');
                window.animationUtils.staggerAnimation(buttons, 'bounce-in', 50);
            }
        }

        function sendSuggestedAction(action) {
            document.getElementById('messageInput').value = action;
            sendMessage();
        }

        function showLoading(show) {
            const loading = document.getElementById('loading');
            const chatContainer = document.getElementById('chatContainer');
            
            if (show) {
                loading.style.display = 'flex';
                chatContainer.style.opacity = '0.7';
            } else {
                loading.style.display = 'none';
                chatContainer.style.opacity = '1';
            }
        }

        function getSpecialistDisplayInfo(specialistKey) {
            const specialists = {
                'project_manager': {
                    name: 'Proje YÃ¶neticisi',
                    role: 'Koordinasyon & Planlama',
                    icon: '<i class="fas fa-clipboard-check"></i>',
                    class: 'pm'
                },
                'lead_developer': {
                    name: 'KÄ±demli GeliÅŸtirici',
                    role: 'Teknik GeliÅŸtirme',
                    icon: '<i class="fas fa-code"></i>',
                    class: 'dev'
                },
                'business_analyst': {
                    name: 'Ä°ÅŸ Analisti',
                    role: 'Ä°ÅŸ SÃ¼reÃ§leri',
                    icon: '<i class="fas fa-chart-line"></i>',
                    class: 'analyst'
                },
                'ui_ux_designer': {
                    name: 'UI/UX TasarÄ±mcÄ±',
                    role: 'KullanÄ±cÄ± Deneyimi',
                    icon: '<i class="fas fa-palette"></i>',
                    class: 'designer'
                },
                'marketing_specialist': {
                    name: 'Pazarlama UzmanÄ±',
                    role: 'Pazarlama & Strateji',
                    icon: '<i class="fas fa-bullhorn"></i>',
                    class: 'marketing'
                },
                'qa_engineer': {
                    name: 'QA MÃ¼hendisi',
                    role: 'Kalite GÃ¼vence',
                    icon: '<i class="fas fa-bug"></i>',
                    class: 'qa'
                },
                'devops_engineer': {
                    name: 'DevOps MÃ¼hendisi',
                    role: 'AltyapÄ± & Deployment',
                    icon: '<i class="fas fa-server"></i>',
                    class: 'devops'
                }
            };
            
            return specialists[specialistKey] || {
                name: specialistKey,
                role: 'Uzman',
                icon: '<i class="fas fa-user"></i>',
                class: 'default'
            };
        }

        async function showSpecialistInfo() {
            try {
                const response = await fetch('/specialist_info');
                const data = await response.json();
                
                if (data.success) {
                    let html = '';
                    const specialists = data.specialists;
                    
                    for (const [key, info] of Object.entries(specialists)) {
                        const displayInfo = getSpecialistDisplayInfo(key);
                        
                        html += `
                            <div class="specialist-card ${displayInfo.class} mb-4" data-animate="fadeInUp">
                                <div class="d-flex align-items-start">
                                    <div class="specialist-icon ${displayInfo.class} me-3">
                                        ${displayInfo.icon}
                                    </div>
                                    <div>
                                        <h5>${displayInfo.name}</h5>
                                        <p class="text-secondary">${info.description}</p>
                                        <div>
                                            <strong>UzmanlÄ±k AlanlarÄ±:</strong>
                                            <div class="mt-2">
                                                ${info.expertise.map(exp => `<span class="badge bg-secondary me-1 mb-1">${exp}</span>`).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    
                    document.getElementById('specialistInfo').innerHTML = html;
                    
                    // Trigger animations
                    if (window.animationUtils) {
                        const cards = document.querySelectorAll('#specialistInfo .specialist-card');
                        window.animationUtils.staggerAnimation(cards, 'bounce-in', 100);
                    }
                    
                    new bootstrap.Modal(document.getElementById('specialistModal')).show();
                } else {
                    alert('Uzman bilgileri alÄ±namadÄ±: ' + data.error);
                }
            } catch (error) {
                console.error('Error loading specialist info:', error);
                alert('Uzman bilgileri yÃ¼klenirken hata oluÅŸtu.');
            }
        }

        function showApiManagement() {
            new bootstrap.Modal(document.getElementById('apiModal')).show();
        }

        async function updateSystemStatus() {
            try {
                const response = await fetch('/system_status');
                const data = await response.json();
                
                const statusContainer = document.getElementById('systemStatus');
                if (data.success) {
                    const status = data.status;
                    let statusHtml = '';
                    
                    // Adapters status
                    if (status.adapters_available > 0) {
                        statusHtml += `
                            <div class="status-item">
                                <span>API Adapterleri</span>
                                <span class="status-badge success">${status.adapters_available} Aktif</span>
                            </div>
                        `;
                    } else {
                        statusHtml += `
                            <div class="status-item">
                                <span>API Adapterleri</span>
                                <span class="status-badge danger">Yok</span>
                            </div>
                        `;
                    }
                    
                    // Specialists status
                    if (status.specialists_available > 0) {
                        statusHtml += `
                            <div class="status-item">
                                <span>Uzmanlar</span>
                                <span class="status-badge success">${status.specialists_available} HazÄ±r</span>
                            </div>
                        `;
                    }
                    
                    statusContainer.innerHTML = statusHtml;
                } else {
                    statusContainer.innerHTML = `
                        <div class="status-item">
                            <span>Durum</span>
                            <span class="status-badge warning">Bilinmiyor</span>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading system status:', error);
                document.getElementById('systemStatus').innerHTML = `
                    <div class="status-item">
                        <span>Durum</span>
                        <span class="status-badge danger">Hata</span>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>